DAY-01:

POD: Group of containers
it is the smallest unit of K8s that can be deployable.
inside pod we have container 
inside container we have application.

POD CAN BE CREATED ON 2 WAYS.

1. IMPERTAIVE: commands.
2. DECLARATIVE: Manifest file.




 1  ll
    2  mkdir abcd
    3  cd abcd/
    4  ll
    5  vim minikube.sh
    6  sh minikube.sh
    7  kubectl run pod1 --image=rahamshaik/awsreponit:latest
    8  kubectl get pods
    9  kubectl get pod
   10  kubectl get po
   11  kubectl get po -o wide
   12  kubectl descibe pod pod1
   13  kubectl describe pod pod1
   14  kubectl delete pod pod1
   15  vim pod1.yml
   16  kubectl create -f pod1.yml
   17  kubectl get po
   18  kubectl describe pod pod1
   19  cat pod1.yml
   20  kubectl api-resources
   21  cat pod1.yml
   22  history


sudo apt update -y
sudo apt upgrade -y
sudo apt install curl wget apt-transport-https -y
sudo curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo mv minikube-linux-amd64 /usr/local/bin/minikube
sudo chmod +x /usr/local/bin/minikube
sudo minikube version
sudo curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
sudo curl -LO "https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256"
sudo echo "$(cat kubectl.sha256) kubectl" | sha256sum --check
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
sudo minikube start --driver=docker --force


============================================================================


DAY-02:

REPLICASET: it will create multiple copies or replicas of a pod.
if we delete one pod RS will create another pod.

replicaset --- > pods

apiVersion: apps/v1
kind: ReplicaSet
metadata:
  labels:
    app: swiggy
  name: swiggy-rs
spec:
  replicas: 3
  selector:
    matchLabels:
      app: swiggy
  template:
    metadata:
      labels:
        app: swiggy
    spec:
      containers:
      - name: cont1
        image: nginx
======================================================================================================================================================


DEPLOYMENT: It is used to update the application.
it will track the changes of an application.

deployment --- > replicaset --- > pods

apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: swiggy
  name: swiggy-deploy
spec:
  replicas: 3
  selector:
    matchLabels:
      app: swiggy
  template:
    metadata:
      labels:
        app: swiggy
    spec:
      containers:
      - name: cont1
        image: nginx:1.16
        
        
 HISTORY:
 
 
   1  mkdir abcd
    2  cd abcd/
    3  vim minikube.sh
    4  sh minikube.sh
    5  rm -rf *
    6  vim abc.yml
    7  kubectl create -f abc.yml
    8  kubectl get po
    9  kubectl delete po swiggy-rs-zqgqf
   10  kubectl get po
   11  kubectl delete pod swiggy-rs-z7667
   12  kubectl get po
   13  kubectl run zomato --image=nginx
   14  kubectl run zomato1 --image=nginx
   15  kubectl run zomato2 --image=nginx
   16  kubectl get po
   17  kubectl get po --show-labels
   18  kubectl get replicaset
   19  kubectl get rs
   20  kubectl api-resources
   21  kubectl get rs
   22  kubectl desribe rs swiggy-rs
   23  kubectl describe rs swiggy-rs
   24  kubectl get rs
   25  kubectl scale rs swiggy-rs --replicas=10
   26  kubectl get rs
   27  kubectl get po
   28  kubectl scale rs swiggy-rs --replicas=5
   29  kubectl get po
   30  kubectl delete rs swiggy-rs
   31  kubectl get po
   32  kubectl delete pods -n default
   33  kubectl delete all -n default
   34  kubectl delete all -n=default
   35  kubectl get po
   36  kubectl delete pod zomato zomato1 zomato2
   37  kubectl get po
   38  vim abc.yml
   39  kubectl create -f abc.yml
   40  kubectl get deployment
   41  kubectl get rs
   42  kubectl get po
   43  kubectl delete pod swiggy-deploy-64cd94d7f4-p9ztf
   44  kubectl get po
   45  kubectl describe deploy
   46  vim abc.yml
   47  kubectl create -f abc.yml
   48  kubectl apply -f abc.yml
   49  kubectl describe deploy
   50  vim abc.yml
   51  kubectl apply -f abc.yml
   52  kubectl describe deploy
   53  kubectl get po
   54  kubectl rollout status deployment/swiggy-deploy
   55  kubectl describe deploy
   56  kubectl get deploy
   57  kubectl get po
   58  kubectl edit deploy swiggy-deploy
   59  kubectl get deploy
   60  kubectl get po
   61  kubectl describe deploy
   62  kubectl edit deploy swiggy-deploy
   63  kubectl get po
   64  kubectl edit deploy swiggy-deploy
   65  kubectl get po
   66  kubectl edit deploy swiggy-deploy
   67  cat abc.yml
   68  history

======================================================

DAY-03: 

kOps, also known as Kubernetes operations, is an open-source tool that helps you create, destroy, upgrade, and maintain a highly available, production-grade Kubernetes cluster. Depending on the requirement, kOps can also provision cloud infrastructure.
kOps is mostly used in deploying AWS and GCE Kubernetes clusters. But officially, the tool only supports AWS. Support for other cloud providers (such as DigitalOcean, GCP, and OpenStack) are in the beta stage.

ADVANTAGES:
•	Automates the provisioning of AWS and GCE Kubernetes clusters
•	Deploys highly available Kubernetes masters
•	Supports rolling cluster updates
•	Autocompletion of commands in the command line
•	Generates Terraform and CloudFormation configurations
•	Manages cluster add-ons.
•	Supports state-sync model for dry-runs and automatic idempotency
•	Creates instance groups to support heterogeneous clusters
ALTERNATIVES:
Amazon EKS , MINIKUBE, KUBEADM, RANCHER, TERRAFORM, HELM.

IAM KEYS: Used to provide access for the kops to create infra.

IAM -- > USERS -- > ADD USERS -- > NAME: kops  -- > NEXT -- > Set permissions: Set permission -- > AdministratorAccess -- > next -- > create
users -- > security credentials -- > create Access keys -- > CLI -- > NEXT -- > CREATE ACCESS KEYS

STEP-1:
ATTACHING KOPS PERMISSIONS TO EC2:
aws configure
cd .aws 
ll
vim config
vim credentials

STEP-2: DOWNLOAD KOPS & KUBECTL 
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
wget https://github.com/kubernetes/kops/releases/download/v1.24.1/kops-linux-amd64
chmod +x kops-linux-amd64 kubectl  # to provide executable permission of both files
mv kubectl /usr/local/bin/kubectl  # all the user executed commands will be on bin folder
mv kops-linux-amd64  /usr/local/bin/kops
vim .bashrc
export PATH=$PATH:/usr/local/bin/
source .bashrc

STEP-3: CREATING BUCKET (To store cluster information) bucket is an object-level store.
aws s3api create-bucket --bucket nareshit0077.k8s.local --region us-east-1
aws s3api put-bucket-versioning --bucket nareshit0077.k8s.local --region us-east-1 --versioning-configuration Status=Enabled
export KOPS_STATE_STORE=s3://nareshit0077.k8s.local

STEP-4: CREATING CLUSTER
kops create cluster --name nareshit0077.k8s.local --zones us-east-1a  --master-size t2.medium --node-size t2.micro
kops update cluster --name nareshit0077.k8s.local --yes --admin

kops delete cluster --name nareshit0077.k8s.local --yes

HISTORY:

 1  aws configure
    2  cd .aws/
    3  ll
    4  vim config
    5  vim credentials
    6  cd
    7  curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
    8  ld
    9  ls
   10  wget https://github.com/kubernetes/kops/releases/download/v1.24.1/kops-linux-amd64
   11  ls
   12  ll
   13  chmod +x kops-linux-amd64 kubectl
   14  ll
   15  mv kubectl /usr/local/bin/kubectl
   16  ll
   17  mv kops-linux-amd64 /usr/local/bin/kops
   18  kops version
   19  kubectl
   20  vim .bashrc
   21  source .bashrc
   22  kops version
   23  kubectl version
   24  aws s3api create-bucket --bucket rahamssshaik09.k8s.local --region ap-south-1
   25  aws s3api create-bucket --bucket nareshit0077.k8s.local --region ap-south-1
   26  aws s3api create-bucket --bucket nareshit0077.k8s.local --region us-east-1
   27  vim .aws/config
   28  aws s3api put-bucket-versioning --bucket rahamssshaik09.k8s.local --region us-east-1 --versioning-configuration Status=Enabled
   29  aws s3api put-bucket-versioning --bucket nareshit0077.k8s.local --region us-east-1 --versioning-configuration Status=Enabled
   30  export KOPS_STATE_STORE=s3://nareshit0077.k8s.local
   31  kops create cluster --name nareshit0077.k8s.local --zones us-east-1a  --master-size t2.medium --node-size t2.micro
   32  kops get cluster
   33  kops edit cluster nareshit0077.k8s.local
   34  kops edit ig --name=nareshit0077.k8s.local master-us-east-1a
   35   kops edit ig --name=nareshit0077.k8s.local nodes-us-east-1a
   36  kops update cluster --name nareshit0077.k8s.local --yes --admin
   37   kops validate cluster --wait 10m
   38  kubectl get nodes
   39  vim abc.yml
   40  kubectl get no
   41  ll
   42  kubectl create -f abc.yml
   43  kubectl get rs
   44  kubectl get po
   45  kubectl get po -o wide
   46  kubectl scale rs swiggy-rs --replicas=10
   47  kubectl get po -o wide
   48  kubectl get no
   49  kops get cluster
   50  kubectl get cluster
   51  kops delete cluster --name nareshit0077.k8s.local --yes
   52  history
